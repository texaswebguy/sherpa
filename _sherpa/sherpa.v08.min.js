/*!
 * SherpaJS     Sherpa Protoype Framework
 * Author     	Bo Lora  (bolora)
 * License      APACHE / http://www.apache.org/licenses/LICENSE-2.0
 *
 * Version 0.8
 * http://bit.ly/uxprototyping
 */
;"use strict";var head_conf={screens:[767,979,1140],head:"Sherpa",screensCss:{gt:false,gte:false,lt:false,lte:false,eq:false}};(function(P,e){function M(b){E[E.length]=b}function G(b){C.className=C.className.replace(RegExp("\\b"+b+"\\b"),"")}function I(g,h){for(var f=0,i=g.length;f<i;f++){h.call(g,g[f],f)}}function z(){C.className=C.className.replace(/ (w-|eq-|gt-|gte-|lt-|lte-|portrait|no-portrait|landscape|no-landscape)\d+/g,"");var a=P.innerWidth||C.clientWidth,f=P.outerWidth||P.screen.width;K.screen.innerWidth=a;K.screen.outerWidth=f;M("w-"+a);I(N.screens,function(b){a>b?(N.screensCss.gt&&M("gt-"+b),N.screensCss.gte&&M("gte-"+b)):a<b?(N.screensCss.lt&&M("lt-"+b),N.screensCss.lte&&M("lte-"+b)):a===b&&(N.screensCss.lte&&M("lte-"+b),N.screensCss.eq&&M("e-q"+b),N.screensCss.gte&&M("gte-"+b))});var f=P.innerHeight||C.clientHeight,c=P.outerHeight||P.screen.height;K.screen.innerHeight=f;K.screen.outerHeight=c;K.feature("portrait",f>a);K.feature("landscape",f<a)}function B(){P.clearTimeout(o);o=P.setTimeout(z,100)}var F=P.document,L=P.navigator,y=P.location,C=F.documentElement,E=[],N={screens:[240,320,480,640,768,800,1024,1280,1440,1680,1920],screensCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!1},browsers:[{ie:{min:6,max:10}}],browserCss:{gt:!0,gte:!1,lt:!0,lte:!1,eq:!0},section:"-section",page:"-page",head:"head"};if(P.head_conf){for(var O in P.head_conf){P.head_conf[O]!==e&&(N[O]=P.head_conf[O])}}var K=P[N.head]=function(){K.ready.apply(null,arguments)};K.feature=function(g,f,h){if(!g){return C.className+=" "+E.join(" "),E=[],K}"[object Function]"===Object.prototype.toString.call(f)&&(f=f.call());M((f?"":"no-")+g);K[g]=!!f;h||(G("no-"+g),G(g),K.feature());return K};K.feature("js",!0);O=L.userAgent.toLowerCase();L=/mobile|midp/.test(O);K.feature("mobile",L,!0);K.feature("desktop",!L,!0);O=/(chrome|firefox)[ \/]([\w.]+)/.exec(O)||/(iphone|ipad|ipod)(?:.*version)?[ \/]([\w.]+)/.exec(O)||/(android)(?:.*version)?[ \/]([\w.]+)/.exec(O)||/(webkit|opera)(?:.*version)?[ \/]([\w.]+)/.exec(O)||/(msie) ([\w.]+)/.exec(O)||[];L=O[1];O=parseFloat(O[2]);switch(L){case"msie":L="ie";O=F.documentMode||O;break;case"firefox":L="ff";break;case"ipod":case"ipad":case"iphone":L="ios";break;case"webkit":L="safari"}K.browser={name:L,version:O};K.browser[L]=!0;for(var j=0,d=N.browsers.length;j<d;j++){for(var J in N.browsers[j]){if(L===J){M(J);for(var D=N.browsers[j][J].max,H=N.browsers[j][J].min;H<=D;H++){O>H?(N.browserCss.gt&&M("gt-"+J+H),N.browserCss.gte&&M("gte-"+J+H)):O<H?(N.browserCss.lt&&M("lt-"+J+H),N.browserCss.lte&&M("lte-"+J+H)):O===H&&(N.browserCss.lte&&M("lte-"+J+H),N.browserCss.eq&&M("eq-"+J+H),N.browserCss.gte&&M("gte-"+J+H))}}else{M("no-"+J)}}}"ie"===L&&9>O&&I("abbr article aside audio canvas details figcaption figure footer header hgroup mark meter nav output progress section summary time video".split(" "),function(b){F.createElement(b)});I(y.pathname.split("/"),function(f,c){if(2<this.length&&this[c+1]!==e){c&&M(this.slice(1,c+1).join("-").toLowerCase()+N.section)}else{var k=f||"index",i=k.indexOf(".");0<i&&(k=k.substring(0,i));C.id=k.toLowerCase()+N.page;c||M("root"+N.section)}});K.screen={height:P.screen.height,width:P.screen.width};z();var o=0;P.addEventListener?P.addEventListener("resize",B,!1):P.attachEvent("onresize",B)})(window);(function(j,l){function i(g){var k=g.charAt(0).toUpperCase()+g.substr(1),g=(g+" "+b.join(k+" ")+k).split(" "),m;g:{for(m in g){if(e[g[m]]!==l){m=!0;break g}}m=!1}return !!m}var d=j.document.createElement("i"),e=d.style,p=" -o- -moz- -ms- -webkit- -khtml- ".split(" "),b=["Webkit","Moz","O","ms","Khtml"],c=j[j.head_conf&&j.head_conf.head||"head"],h={gradient:function(){e.cssText=("background-image:"+p.join("gradient(linear,left top,right bottom,from(#9f9),to(#fff));background-image:")+p.join("linear-gradient(left top,#eee,#fff);background-image:")).slice(0,-17);return !!e.backgroundImage},rgba:function(){e.cssText="background-color:rgba(0,0,0,0.5)";return !!e.backgroundColor},opacity:function(){return""===d.style.opacity},textshadow:function(){return""===e.textShadow},multiplebgs:function(){e.cssText="background:url(//:),url(//:),red url(//:)";return/(url\s*\(.*?){3}/.test(e.background)},boxshadow:function(){return i("boxShadow")},borderimage:function(){return i("borderImage")},borderradius:function(){return i("borderRadius")},cssreflections:function(){return i("boxReflect")},csstransforms:function(){return i("transform")},csstransitions:function(){return i("transition")},touch:function(){return"ontouchstart" in j},retina:function(){return 1<j.devicePixelRatio},fontface:function(){var f=c.browser.version;switch(c.browser.name){case"ie":return 9<=f;case"chrome":return 13<=f;case"ff":return 6<=f;case"ios":return 5<=f;case"android":return !1;case"webkit":return 5.1<=f;case"opera":return 10<=f;default:return !1}}},o;for(o in h){h[o]&&c.feature(o,h[o].call(),!0)}c.feature()})(window);(function(af,G){function ab(){}function V(g,f){if(g){"object"===typeof g&&(g=[].slice.call(g));for(var d=0,h=g.length;d<h;d++){f.call(g,g[d],d)}}}function X(d,c){var f=Object.prototype.toString.call(c).slice(8,-1);return c!==G&&null!==c&&f===d}function N(b){return X("Function",b)}function P(b){b=b||ab;b._done||(b(),b._done=1)}function U(d){var c={};if("object"===typeof d){for(var f in d){d[f]&&(c={name:f,url:d[f]})}}else{c=d.split("/"),c=c[c.length-1],f=c.indexOf("?"),c={name:-1!==f?c.substring(0,f):c,url:d}}return(d=Y[c.name])&&d.url===c.url?d:Y[c.name]=c}function aa(d){var d=d||Y,c;for(c in d){if(d.hasOwnProperty(c)&&d[c].state!==j){return !1}}return !0}function L(d,c){c=c||ab;d.state===j?c():d.state===M?ac.ready(d.name,c):d.state===O?d.onpreload.push(function(){L(d,c)}):(d.state=M,R(d,function(){d.state=j;c();V(o[d.name],function(b){P(b)});J&&aa()&&V(o.ALL,function(b){P(b)})}))}function R(a,g){var g=g||ab,b;/\.css[^\.]*$/.test(a.url)?(b=ae.createElement("link"),b.type="text/"+(a.type||"css"),b.rel="stylesheet",b.href=a.url):(b=ae.createElement("script"),b.type="text/"+(a.type||"javascript"),b.src=a.url);b.onload=b.onreadystatechange=function(c){c=c||af.event;if("load"===c.type||/loaded|complete/.test(b.readyState)&&(!ae.documentMode||9>ae.documentMode)){b.onload=b.onreadystatechange=b.onerror=null,g()}};b.onerror=function(){b.onload=b.onreadystatechange=b.onerror=null;g()};b.async=!1;b.defer=!1;var f=ae.head||ae.getElementsByTagName("head")[0];f.insertBefore(b,f.lastChild)}function T(){ae.body?J||(J=!0,V(Z,function(b){P(b)})):(af.clearTimeout(ac.readyTimeout),ac.readyTimeout=af.setTimeout(T,50))}function ad(){ae.addEventListener?(ae.removeEventListener("DOMContentLoaded",ad,!1),T()):"complete"===ae.readyState&&(ae.detachEvent("onreadystatechange",ad),T())}var ae=af.document,Z=[],H=[],o={},Y={},S="async" in ae.createElement("script")||"MozAppearance" in ae.documentElement.style||af.opera,W,J,Q=af.head_conf&&af.head_conf.head||"head",ac=af[Q]=af[Q]||function(){ac.ready.apply(null,arguments)},O=1,M=3,j=4;ac.load=S?function(){var d=arguments,c=d[d.length-1],f={};N(c)||(c=null);V(d,function(b,a){b!==c&&(b=U(b),f[b.name]=b,L(b,c&&a===d.length-2?function(){aa(f)&&P(c)}:null))});return ac}:function(){var f=arguments,d=[].slice.call(f,1),g=d[0];if(!W){return H.push(function(){ac.load.apply(null,f)}),ac}g?(V(d,function(h){if(!N(h)){var c=U(h);c.state===G&&(c.state=O,c.onpreload=[],R({url:c.url,type:"cache"},function(){c.state=2;V(c.onpreload,function(b){b.call()})}))}}),L(U(f[0]),N(g)?g:function(){ac.load.apply(null,d)})):L(U(f[0]));return ac};ac.js=ac.load;ac.test=function(f,d,i,h){f="object"===typeof f?f:{test:f,success:d?X("Array",d)?d:[d]:!1,failure:i?X("Array",i)?i:[i]:!1,callback:h||ab};(d=!!f.test)&&f.success?(f.success.push(f.callback),ac.load.apply(null,f.success)):!d&&f.failure?(f.failure.push(f.callback),ac.load.apply(null,f.failure)):h();return ac};ac.ready=function(b,f){if(b===ae){return J?P(f):Z.push(f),ac}N(b)&&(f=b,b="ALL");if("string"!==typeof b||!N(f)){return ac}var d=Y[b];if(d&&d.state===j||"ALL"===b&&aa()&&J){return P(f),ac}(d=o[b])?d.push(f):o[b]=[f];return ac};ac.ready(ae,function(){aa()&&V(o.ALL,function(b){P(b)});ac.feature&&ac.feature("domloaded",!0)});if("complete"===ae.readyState){T()}else{if(ae.addEventListener){ae.addEventListener("DOMContentLoaded",ad,!1),af.addEventListener("load",T,!1)}else{ae.attachEvent("onreadystatechange",ad);af.attachEvent("onload",T);var e=!1;try{e=null==af.frameElement&&ae.documentElement}catch(I){}e&&e.doScroll&&function K(){if(!J){try{e.doScroll("left")}catch(a){af.clearTimeout(ac.readyTimeout);ac.readyTimeout=af.setTimeout(K,50);return}T()}}()}}setTimeout(function(){W=!0;V(H,function(b){b()})},300)})(window);if(typeof(console)==="undefined"){var console={};console.log=console.error=console.info=console.debug=console.warn=console.trace=console.dir=console.dirxml=console.group=console.groupEnd=console.time=console.timeEnd=console.assert=console.profile=function(){}}if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());(function(){var ak=this,ae=ak._,ag={},au=Array.prototype,ad=Object.prototype,ap=Function.prototype,ay=au.push,aj=au.slice,aw=au.concat,am=ad.toString,at=ad.hasOwnProperty,af=au.forEach,ai=au.map,aq=au.reduce,ac=au.reduceRight,ar=au.filter,av=au.every,al=au.some,Z=au.indexOf,ax=au.lastIndexOf,aa=Array.isArray,ab=Object.keys,az=ap.bind,ao=function(a){return a instanceof ao?a:this instanceof ao?(this._wrapped=a,void 0):new ao(a)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=ao),exports._=ao):ak._=ao,ao.VERSION="1.5.2";var X=ao.each=ao.forEach=function(h,f,g){if(null!=h){if(af&&h.forEach===af){h.forEach(f,g)}else{if(h.length===+h.length){for(var c=0,d=h.length;d>c;c++){if(f.call(g,h[c],c,h)===ag){return}}}else{for(var b=ao.keys(h),c=0,d=b.length;d>c;c++){if(f.call(g,h[b[c]],b[c],h)===ag){return}}}}}};ao.map=ao.collect=function(d,a,b){var c=[];return null==d?c:ai&&d.map===ai?d.map(a,b):(X(d,function(g,e,f){c.push(a.call(b,g,e,f))}),c)};var U="Reduce of empty array with no initial value";ao.reduce=ao.foldl=ao.inject=function(f,b,c,d){var a=arguments.length>2;if(null==f&&(f=[]),aq&&f.reduce===aq){return d&&(b=ao.bind(b,d)),a?f.reduce(b,c):f.reduce(b)}if(X(f,function(h,g,e){a?c=b.call(d,c,h,g,e):(c=h,a=!0)}),!a){throw new TypeError(U)}return c},ao.reduceRight=ao.foldr=function(j,f,g,h){var c=arguments.length>2;if(null==j&&(j=[]),ac&&j.reduceRight===ac){return h&&(f=ao.bind(f,h)),c?j.reduceRight(f,g):j.reduceRight(f)}var d=j.length;if(d!==+d){var b=ao.keys(j);d=b.length}if(X(j,function(e,i,a){i=b?b[--d]:--d,c?g=f.call(h,g,j[i],i,a):(g=j[i],c=!0)}),!c){throw new TypeError(U)}return g},ao.find=ao.detect=function(d,a,b){var c;return J(d,function(g,e,f){return a.call(b,g,e,f)?(c=g,!0):void 0}),c},ao.filter=ao.select=function(d,a,b){var c=[];return null==d?c:ar&&d.filter===ar?d.filter(a,b):(X(d,function(g,e,f){a.call(b,g,e,f)&&c.push(g)}),c)},ao.reject=function(c,a,b){return ao.filter(c,function(g,f,d){return !a.call(b,g,f,d)},b)},ao.every=ao.all=function(d,b,c){b||(b=ao.identity);var a=!0;return null==d?a:av&&d.every===av?d.every(b,c):(X(d,function(g,f,e){return(a=a&&b.call(c,g,f,e))?void 0:ag}),!!a)};var J=ao.some=ao.any=function(d,b,c){b||(b=ao.identity);var a=!1;return null==d?a:al&&d.some===al?d.some(b,c):(X(d,function(g,f,e){return a||(a=b.call(c,g,f,e))?ag:void 0}),!!a)};ao.contains=ao.include=function(b,a){return null==b?!1:Z&&b.indexOf===Z?b.indexOf(a)!=-1:J(b,function(c){return c===a})},ao.invoke=function(d,a){var b=aj.call(arguments,2),c=ao.isFunction(a);return ao.map(d,function(e){return(c?a:e[a]).apply(e,b)})},ao.pluck=function(b,a){return ao.map(b,function(c){return c[a]})},ao.where=function(c,a,b){return ao.isEmpty(a)?b?void 0:[]:ao[b?"find":"filter"](c,function(e){for(var d in a){if(a[d]!==e[d]){return !1}}return !0})},ao.findWhere=function(b,a){return ao.where(b,a,!0)},ao.max=function(d,a,b){if(!a&&ao.isArray(d)&&d[0]===+d[0]&&d.length<65535){return Math.max.apply(Math,d)}if(!a&&ao.isEmpty(d)){return -1/0}var c={computed:-1/0,value:-1/0};return X(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;e>c.computed&&(c={value:h,computed:e})}),c.value},ao.min=function(d,a,b){if(!a&&ao.isArray(d)&&d[0]===+d[0]&&d.length<65535){return Math.min.apply(Math,d)}if(!a&&ao.isEmpty(d)){return 1/0}var c={computed:1/0,value:1/0};return X(d,function(h,f,g){var e=a?a.call(b,h,f,g):h;e<c.computed&&(c={value:h,computed:e})}),c.value},ao.shuffle=function(d){var a,b=0,c=[];return X(d,function(e){a=ao.random(b++),c[b-1]=c[a],c[a]=e}),c},ao.sample=function(c,a,b){return arguments.length<2||b?c[ao.random(c.length-1)]:ao.shuffle(c).slice(0,Math.max(0,a))};var an=function(a){return ao.isFunction(a)?a:function(b){return b[a]}};ao.sortBy=function(d,a,b){var c=an(a);return ao.pluck(ao.map(d,function(g,f,e){return{value:g,index:f,criteria:c.call(b,g,f,e)}}).sort(function(i,f){var g=i.criteria,h=f.criteria;if(g!==h){if(g>h||g===void 0){return 1}if(h>g||h===void 0){return -1}}return i.index-f.index}),"value")};var Q=function(a){return function(d,f,g){var b={},c=null==f?ao.identity:an(f);return X(d,function(h,e){var i=c.call(g,h,e,d);a(b,i,h)}),b}};ao.groupBy=Q(function(c,a,b){(ao.has(c,a)?c[a]:c[a]=[]).push(b)}),ao.indexBy=Q(function(c,a,b){c[a]=b}),ao.countBy=Q(function(b,a){ao.has(b,a)?b[a]++:b[a]=1}),ao.sortedIndex=function(k,f,g,h){g=null==g?ao.identity:an(g);for(var c=g.call(h,f),d=0,b=k.length;b>d;){var j=d+b>>>1;g.call(h,k[j])<c?d=j+1:b=j}return d},ao.toArray=function(a){return a?ao.isArray(a)?aj.call(a):a.length===+a.length?ao.map(a,ao.identity):ao.values(a):[]},ao.size=function(a){return null==a?0:a.length===+a.length?a.length:ao.keys(a).length},ao.first=ao.head=ao.take=function(c,a,b){return null==c?void 0:null==a||b?c[0]:aj.call(c,0,a)},ao.initial=function(c,a,b){return aj.call(c,0,c.length-(null==a||b?1:a))},ao.last=function(c,a,b){return null==c?void 0:null==a||b?c[c.length-1]:aj.call(c,Math.max(c.length-a,0))},ao.rest=ao.tail=ao.drop=function(c,a,b){return aj.call(c,null==a||b?1:a)},ao.compact=function(a){return ao.filter(a,ao.identity)};var L=function(c,a,b){return a&&ao.every(c,ao.isArray)?aw.apply(b,c):(X(c,function(d){ao.isArray(d)||ao.isArguments(d)?a?ay.apply(b,d):L(d,a,b):b.push(d)}),b)};ao.flatten=function(b,a){return L(b,a,[])},ao.without=function(a){return ao.difference(a,aj.call(arguments,1))},ao.uniq=ao.unique=function(j,f,g,h){ao.isFunction(f)&&(h=g,g=f,f=!1);var c=g?ao.map(j,g,h):j,d=[],b=[];return X(c,function(a,i){(f?i&&b[b.length-1]===a:ao.contains(b,a))||(b.push(a),d.push(j[i]))}),d},ao.union=function(){return ao.uniq(ao.flatten(arguments,!0))},ao.intersection=function(b){var a=aj.call(arguments,1);return ao.filter(ao.uniq(b),function(c){return ao.every(a,function(d){return ao.indexOf(d,c)>=0})})},ao.difference=function(b){var a=aw.apply(au,aj.call(arguments,1));return ao.filter(b,function(c){return !ao.contains(a,c)})},ao.zip=function(){for(var c=ao.max(ao.pluck(arguments,"length").concat(0)),a=new Array(c),b=0;c>b;b++){a[b]=ao.pluck(arguments,""+b)}return a},ao.object=function(f,b){if(null==f){return{}}for(var c={},d=0,a=f.length;a>d;d++){b?c[f[d]]=b[d]:c[f[d][0]]=f[d][1]}return c},ao.indexOf=function(f,b,c){if(null==f){return -1}var d=0,a=f.length;if(c){if("number"!=typeof c){return d=ao.sortedIndex(f,b),f[d]===b?d:-1}d=0>c?Math.max(0,a+c):c}if(Z&&f.indexOf===Z){return f.indexOf(b,c)}for(;a>d;d++){if(f[d]===b){return d}}return -1},ao.lastIndexOf=function(f,b,c){if(null==f){return -1}var d=null!=c;if(ax&&f.lastIndexOf===ax){return d?f.lastIndexOf(b,c):f.lastIndexOf(b)}for(var a=d?c:f.length;a--;){if(f[a]===b){return a}}return -1},ao.range=function(g,c,d){arguments.length<=1&&(c=g||0,g=0),d=arguments[2]||1;for(var f=Math.max(Math.ceil((c-g)/d),0),a=0,b=new Array(f);f>a;){b[a++]=g,g+=d}return b};var H=function(){};ao.bind=function(d,a){var b,c;if(az&&d.bind===az){return az.apply(d,aj.call(arguments,1))}if(!ao.isFunction(d)){throw new TypeError}return b=aj.call(arguments,2),c=function(){if(!(this instanceof c)){return d.apply(a,b.concat(aj.call(arguments)))}H.prototype=d.prototype;var e=new H;H.prototype=null;var f=d.apply(e,b.concat(aj.call(arguments)));return Object(f)===f?f:e}},ao.partial=function(b){var a=aj.call(arguments,1);return function(){return b.apply(this,a.concat(aj.call(arguments)))}},ao.bindAll=function(b){var a=aj.call(arguments,1);if(0===a.length){throw new Error("bindAll must be passed function names")}return X(a,function(c){b[c]=ao.bind(b[c],b)}),b},ao.memoize=function(c,a){var b={};return a||(a=ao.identity),function(){var d=a.apply(this,arguments);return ao.has(b,d)?b[d]:b[d]=c.apply(this,arguments)}},ao.delay=function(c,a){var b=aj.call(arguments,2);return setTimeout(function(){return c.apply(null,b)},a)},ao.defer=function(a){return ao.delay.apply(ao,[a,1].concat(aj.call(arguments,1)))},ao.throttle=function(f,m,b){var h,l,g,k=null,d=0;b||(b={});var j=function(){d=b.leading===!1?0:new Date,k=null,g=f.apply(h,l)};return function(){var a=new Date;d||b.leading!==!1||(d=a);var c=m-(a-d);return h=this,l=arguments,0>=c?(clearTimeout(k),k=null,d=a,g=f.apply(h,l)):k||b.trailing===!1||(k=setTimeout(j,c)),g}},ao.debounce=function(k,f,g){var h,c,d,b,j;return function(){d=this,c=arguments,b=new Date;var e=function(){var i=new Date-b;f>i?h=setTimeout(e,f-i):(h=null,g||(j=k.apply(d,c)))},a=g&&!h;return h||(h=setTimeout(e,f)),a&&(j=k.apply(d,c)),j}},ao.once=function(c){var a,b=!1;return function(){return b?a:(b=!0,a=c.apply(this,arguments),c=null,a)}},ao.wrap=function(b,a){return function(){var c=[b];return ay.apply(c,arguments),a.apply(this,c)}},ao.compose=function(){var a=arguments;return function(){for(var b=arguments,c=a.length-1;c>=0;c--){b=[a[c].apply(this,b)]}return b[0]}},ao.after=function(b,a){return function(){return --b<1?a.apply(this,arguments):void 0}},ao.keys=ab||function(c){if(c!==Object(c)){throw new TypeError("Invalid object")}var a=[];for(var b in c){ao.has(c,b)&&a.push(b)}return a},ao.values=function(f){for(var b=ao.keys(f),c=b.length,d=new Array(c),a=0;c>a;a++){d[a]=f[b[a]]}return d},ao.pairs=function(f){for(var b=ao.keys(f),c=b.length,d=new Array(c),a=0;c>a;a++){d[a]=[b[a],f[b[a]]]}return d},ao.invert=function(f){for(var b={},c=ao.keys(f),d=0,a=c.length;a>d;d++){b[f[c[d]]]=c[d]}return b},ao.functions=ao.methods=function(c){var a=[];for(var b in c){ao.isFunction(c[b])&&a.push(b)}return a.sort()},ao.extend=function(a){return X(aj.call(arguments,1),function(b){if(b){for(var c in b){a[c]=b[c]}}}),a},ao.pick=function(c){var a={},b=aw.apply(au,aj.call(arguments,1));return X(b,function(d){d in c&&(a[d]=c[d])}),a},ao.omit=function(d){var b={},c=aw.apply(au,aj.call(arguments,1));for(var a in d){ao.contains(c,a)||(b[a]=d[a])}return b},ao.defaults=function(a){return X(aj.call(arguments,1),function(b){if(b){for(var c in b){a[c]===void 0&&(a[c]=b[c])}}}),a},ao.clone=function(a){return ao.isObject(a)?ao.isArray(a)?a.slice():ao.extend({},a):a},ao.tap=function(b,a){return a(b),b};var G=function(g,q,b,k){if(g===q){return 0!==g||1/g==1/q}if(null==g||null==q){return g===q}g instanceof ao&&(g=g._wrapped),q instanceof ao&&(q=q._wrapped);var p=am.call(g);if(p!=am.call(q)){return !1}switch(p){case"[object String]":return g==String(q);case"[object Number]":return g!=+g?q!=+q:0==g?1/g==1/q:g==+q;case"[object Date]":case"[object Boolean]":return +g==+q;case"[object RegExp]":return g.source==q.source&&g.global==q.global&&g.multiline==q.multiline&&g.ignoreCase==q.ignoreCase}if("object"!=typeof g||"object"!=typeof q){return !1}for(var h=b.length;h--;){if(b[h]==g){return k[h]==q}}var m=g.constructor,d=q.constructor;if(m!==d&&!(ao.isFunction(m)&&m instanceof m&&ao.isFunction(d)&&d instanceof d)){return !1}b.push(g),k.push(q);var l=0,j=!0;if("[object Array]"==p){if(l=g.length,j=l==q.length){for(;l--&&(j=G(g[l],q[l],b,k));){}}}else{for(var v in g){if(ao.has(g,v)&&(l++,!(j=ao.has(q,v)&&G(g[v],q[v],b,k)))){break}}if(j){for(v in q){if(ao.has(q,v)&&!l--){break}}j=!l}}return b.pop(),k.pop(),j};ao.isEqual=function(b,a){return G(b,a,[],[])},ao.isEmpty=function(b){if(null==b){return !0}if(ao.isArray(b)||ao.isString(b)){return 0===b.length}for(var a in b){if(ao.has(b,a)){return !1}}return !0},ao.isElement=function(a){return !(!a||1!==a.nodeType)},ao.isArray=aa||function(a){return"[object Array]"==am.call(a)},ao.isObject=function(a){return a===Object(a)},X(["Arguments","Function","String","Number","Date","RegExp"],function(a){ao["is"+a]=function(b){return am.call(b)=="[object "+a+"]"}}),ao.isArguments(arguments)||(ao.isArguments=function(a){return !(!a||!ao.has(a,"callee"))}),"function"!=typeof/./&&(ao.isFunction=function(a){return"function"==typeof a}),ao.isFinite=function(a){return isFinite(a)&&!isNaN(parseFloat(a))},ao.isNaN=function(a){return ao.isNumber(a)&&a!=+a},ao.isBoolean=function(a){return a===!0||a===!1||"[object Boolean]"==am.call(a)},ao.isNull=function(a){return null===a},ao.isUndefined=function(a){return a===void 0},ao.has=function(b,a){return at.call(b,a)},ao.noConflict=function(){return ak._=ae,this},ao.identity=function(a){return a},ao.times=function(f,b,c){for(var d=Array(Math.max(0,f)),a=0;f>a;a++){d[a]=b.call(c,a)}return d},ao.random=function(b,a){return null==a&&(a=b,b=0),b+Math.floor(Math.random()*(a-b+1))};var P={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};P.unescape=ao.invert(P.escape);var C={escape:new RegExp("["+ao.keys(P.escape).join("")+"]","g"),unescape:new RegExp("("+ao.keys(P.unescape).join("|")+")","g")};ao.each(["escape","unescape"],function(a){ao[a]=function(b){return null==b?"":(""+b).replace(C[a],function(c){return P[a][c]})}}),ao.result=function(c,a){if(null==c){return void 0}var b=c[a];return ao.isFunction(b)?b.call(c):b},ao.mixin=function(a){X(ao.functions(a),function(b){var c=ao[b]=a[b];ao.prototype[b]=function(){var d=[this._wrapped];return ay.apply(d,arguments),Y.call(this,c.apply(ao,d))}})};var K=0;ao.uniqueId=function(b){var a=++K+"";return b?b+a:a},ao.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var ah=/(.)^/,W={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},V=/\\|'|\r|\n|\t|\u2028|\u2029/g;ao.template=function(f,m,b){var h;b=ao.defaults({},b,ao.templateSettings);var l=new RegExp([(b.escape||ah).source,(b.interpolate||ah).source,(b.evaluate||ah).source].join("|")+"|$","g"),g=0,k="__p+='";f.replace(l,function(c,i,n,a,p){return k+=f.slice(g,p).replace(V,function(e){return"\\"+W[e]}),i&&(k+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(k+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),a&&(k+="';\n"+a+"\n__p+='"),g=p+c.length,c}),k+="';\n",b.variable||(k="with(obj||{}){\n"+k+"}\n"),k="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+k+"return __p;\n";try{h=new Function(b.variable||"obj","_",k)}catch(d){throw d.source=k,d}if(m){return h(m,ao)}var j=function(a){return h.call(this,a,ao)};return j.source="function("+(b.variable||"obj")+"){\n"+k+"}",j},ao.chain=function(a){return ao(a).chain()};var Y=function(a){return this._chain?ao(a).chain():a};ao.mixin(ao),X(["pop","push","reverse","shift","sort","splice","unshift"],function(b){var a=au[b];ao.prototype[b]=function(){var c=this._wrapped;return a.apply(c,arguments),"shift"!=b&&"splice"!=b||0!==c.length||delete c[0],Y.call(this,c)}}),X(["concat","join","slice"],function(b){var a=au[b];ao.prototype[b]=function(){return Y.call(this,a.apply(this._wrapped,arguments))}}),ao.extend(ao.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this);var SHERPA={};SHERPA.ENABLE_COUNTER=true;Sherpa.viewModel={};if(typeof(SHERPA_CONFIG_OVERRIDES)==="undefined"){var SHERPA_CONFIG_OVERRIDES={}}Sherpa.counter=function(b){if(SHERPA.ENABLE_COUNTER){if(b=="report"){var a="---------------------------------------\nSherpa Counter Report\n---------------------------------------\n";_.each(_.keys(Sherpa.counter.obj.time_log),function(d){if(Sherpa.counter.obj.time_log[d].elapsed_time){a+=d+": "+Sherpa.counter.obj.time_log[d].elapsed_time/1000+" seconds\n";a+="---------------------------------------\n"}});console.log(a)}else{if(!Sherpa.counter.obj){var c={count:0,start_time:(new Date).getTime(),time_log:{},last_time:0};c.new_time=c.start_time}else{var c=Sherpa.counter.obj;c.new_time=(new Date).getTime()}c.count++;c.elapsed_time=(c.new_time-c.last_time)/1000;c.last_time=c.new_time;if(b&&c.time_log[b]==undefined){c.time_log[b]={};c.time_log[b].start=c.new_time;console.log(c.count+": "+b+" - starting timer at:"+(c.last_time-c.start_time)/1000+" seconds")}else{if(b){c.time_log[b].elapsed_time=c.last_time-c.time_log[b].start;console.log(c.count+": "+b+" - elapsed time:"+c.time_log[b].elapsed_time/1000+" seconds")}else{console.log(c.count+": elapsed/total time:"+c.elapsed_time+"/"+c.last_time)}}Sherpa.counter.obj=c;return c.new_time}}};Sherpa.counter("Sherpa INIT");Sherpa.init={getCoreConfig:{},getOverrideConfig:{},errorCount:0,config_filename:"",core_name:"_sherpa/",admin_console_path:"_sherpa/admin/",default_config_filename:"_sherpa/config/core-config.json",web_root_path:function(b){var a=b.split("/")[b.split("/").length-1];if(a){return b.replace(a,"")}else{return b}}(location.pathname),core_path:"",errorMsg:function(c,b){var d=document.createDocumentFragment(),a=document.createElement("div");if(!b){b="Fatal Sherpa Error"}a.innerHTML=Sherpa.init.errorHTML({TITLE:b,MESSAGE:c});while(a.firstChild){d.appendChild(a.firstChild)}if(document.body){document.body.insertBefore(d,document.body.childNodes[0])}else{window.onload=function(){document.body.insertBefore(d,document.body.childNodes[0])}}$("#sherpa-error .close").click(function(){Sherpa.init.errorMsgDismiss()});return false},errorMsgDismiss:function(){$("#sherpa-error").remove()}};Sherpa.QA={check:function(){},logEntry:function(){}};Sherpa.init.errorHTML=_.template('<div id="sherpa-error"><style>body{opacity:1}</style><div style="opacity: 0.5; background:#000; height: 1814px; width: 1903px; position: fixed; left: 0px; top: 0px; z-index: 1001;"></div><div style="position: relative; z-index: 1002; width:100%; max-width: 420px; margin:20px auto 1000px;"><div tabindex="-1" style="height: 100%; outline: 0px; width: 100%; overflow: visible;"><div id="errorMsg" style="display: block;font-family: \'Trebuchet MS\', Verdana, Arial;  font-size: 16px;  text-align: left;"><div style="height: 30px;  width: 100%;background: #B90000;  color: #fff;  font-size: 1.1em;  font-weight: bold;  line-height: 30px;"><span style="padding-left: 10px;"><%- TITLE %><span class="close" style="float:right;color:#fff;opacity:1;padding:5px">X</span></span></div><div id="errorMsg" style="    color: #333;  background:#fff; margin: 0;  padding: 12px 4px 12px 8px;  font-size: 1em;"><%- MESSAGE %></div></div></div></div></div>');if(location.pathname.match(Sherpa.init.core_name)&&!location.pathname.match(Sherpa.init.admin_console_path)){var msg='Please do not put any of your prototype files inside the "'+Sherpa.init.core_name.replace(/\//,"")+'" folder.';Sherpa.init.errorMsg(msg)}else{if(location.pathname.match(Sherpa.init.admin_console_path)){Sherpa.init.config_filename=Sherpa.init.default_config_filename.replace(Sherpa.init.core_name,"../")}else{Sherpa.init.config_filename=Sherpa.init.default_config_filename}}if(window.XMLHttpRequest){Sherpa.init.getCoreConfig=new XMLHttpRequest();if(SHERPA_CONFIG_OVERRIDES){Sherpa.init.getOverrideConfig=new XMLHttpRequest()}}else{Sherpa.init.getCoreConfig=new ActiveXObject("Microsoft.XMLHTTP");if(SHERPA_CONFIG_OVERRIDES){Sherpa.init.getOverrideConfig=new ActiveXObject("Microsoft.XMLHTTP")}}Sherpa.init.getCoreConfig.onreadystatechange=function(){if(Sherpa.init.getCoreConfig.readyState==4){if(Sherpa.init.getCoreConfig.status==200){try{SHERPA=JSON.parse(Sherpa.init.getCoreConfig.responseText);SHERPA.GLOBAL_CONFIG=Sherpa.init.config_filename;SHERPA.PATH_WEBROOT=Sherpa.init.web_root_path;SHERPA.PATH_CORE=Sherpa.init.core_path+Sherpa.init.core_name;SHERPA.CONFIG_OVERRIDES=SHERPA_CONFIG_OVERRIDES.GLOBAL_CONFIG}catch(a){Sherpa.init.errorMsg("The configuration file you specified "+SHERPA.GLOBAL_CONFIG+" has an error.")}if(SHERPA_CONFIG_OVERRIDES.GLOBAL_CONFIG){Sherpa.init.getOverrideConfig.open("GET",SHERPA_CONFIG_OVERRIDES.GLOBAL_CONFIG,true);Sherpa.init.getOverrideConfig.send()}else{Sherpa.init.resetPaths(Sherpa,SHERPA,SHERPA_CONFIG_OVERRIDES,console)}}if(Sherpa.init.getCoreConfig.status==404){if(Sherpa.init.errorCount<3){Sherpa.init.errorCount++;Sherpa.init.core_path+="../";Sherpa.init.config_filename=Sherpa.init.core_path+Sherpa.init.default_config_filename;Sherpa.init.getCoreConfig.open("GET",Sherpa.init.config_filename,true);Sherpa.init.getCoreConfig.send()}else{Sherpa.init.errorMsg(Sherpa.init.core_name+"/config/core_config.json was not found - please make sure you have"+Sherpa.init.core_name.replace(/\//,"")+" folder in your project folder.")}}}};Sherpa.init.getCoreConfig.open("GET",Sherpa.init.config_filename,true);Sherpa.init.getCoreConfig.send();Sherpa.init.getOverrideConfig.onreadystatechange=function(){if(Sherpa.init.getOverrideConfig.readyState==4){if(Sherpa.init.getOverrideConfig.status==200){try{SHERPA_CONFIG_OVERRIDES=JSON.parse(Sherpa.init.getOverrideConfig.responseText);Sherpa.init.resetPaths(Sherpa,SHERPA,SHERPA_CONFIG_OVERRIDES,console)}catch(a){Sherpa.init.errorMsg("The configuration file you specified "+SHERPA_CONFIG_OVERRIDES.GLOBAL_CONFIG+" has an error.")}}if(Sherpa.init.getOverrideConfig.status==404){Sherpa.init.errorMsg("The configuration file you specified "+SHERPA_CONFIG_OVERRIDES.GLOBAL_CONFIG+" was not found - please make sure it is in place.")}}};Sherpa.init.resetPaths=function(h,g,d,a){try{if(d){_.extend(g,d)}}catch(f){h.init.errorMsg("Something is wrong with your configurations override file: "+f)}g.PATH_PROTO_ASSETS=g.PATH_WEBROOT+g.PATH_PROTO_ASSETS;g.PATH_PROTO_DOCUMENTATION=g.PATH_PROTO_ASSETS+g.PATH_PROTO_DOCUMENTATION;g.PATH_PROTO_JS=g.PATH_PROTO_ASSETS+g.PATH_PROTO_JS;g.PATH_PROTO_CSS=g.PATH_PROTO_ASSETS+g.PATH_PROTO_CSS;g.PATH_CORE_JS=g.PATH_CORE+g.PATH_CORE_JS;g.PATH_CORE_COMPONENTS=g.PATH_CORE+g.PATH_CORE_COMPONENTS;g.PATH_CORE_BIN=g.PATH_CORE+g.PATH_CORE_BIN;g.PATH_CORE_CSS=g.PATH_CORE+g.PATH_CORE_CSS;g.PATH_CORE_CSS_THEME=g.PATH_CORE+g.PATH_CORE_CSS_THEME;g.LIB_CSS.css_theme.local=g.CSS_THEME_DEFAULT+".css";if(g.CSS_THEME_DEFAULT_REMOTE_URL){g.LIB_CSS.css_theme.cdn=g.CSS_THEME_DEFAULT_REMOTE_URL}var c=JSON.stringify(g,null,1).match(/".*": ".*?undefined/g);if(c){var e="You have some undeclared variables in your configuration file: <ul>";for(var b=c.length-1;b>=0;b--){e+="<li>"+c[b]+"</li>"}e+="</ul>";h.init.errorMsg(e)}try{h.version=g.VERSION;h.version.summary=g.VERSION.prodName+" v"+g.VERSION.major+g.VERSION.minor+" - "+g.VERSION.releaseDate+" - ("+g.VERSION.codeName+")"}catch(f){h.init.errorMsg("Sherpa Version information missing in: <br/><strong>"+g.GLOBAL_CONFIG+"</strong><br/><br/>"+f)}h.viewModel.default_values=g.default_values;if(h.viewModel.default_values===undefined){h.init.errorMsg("Sherpa default values missing in: <br/><strong>"+g.GLOBAL_CONFIG+"</strong><br/><br/>")}h.init.start(h,g,a)};Sherpa.init.start=function(c,b,a){if(b.RUN_AS_LOCAL){c.js({sherpautils:b.PATH_CORE_JS+b.LIB_JS.sherpautils["local"]});c.counter("Sherpa Utilities")}else{c.js({sherpautils:b.PATH_CORE_JS+b.LIB_JS.sherpautils["cdn"]});c.counter("Sherpa Utilities")}c.ready("sherpautils",function(){c.counter("Sherpa Utilities");_.each(b.LOAD_CSS_CORE,function(d){c.loadCoreCSS(d);if(b.ENABLE_COUNTER){a.log("Loading CSS library: "+d)}});if(c.browser.ie){if(c.browser.ie9||c.browser.ie10){c.loadCoreCSS(b.LOAD_CSS_GRID_IE9)}else{c.loadCoreCSS(b.LOAD_CSS_GRID_IELT8)}}else{c.loadCoreCSS(b.LOAD_CSS_GRID)}_.each(b.LOAD_JS_CORE,function(d){c.loadCoreJS(d)});c.ready("angular",function(){_.each(b.LOAD_ANGULAR_MODULES,function(d){c.loadCoreJS(d)});c.loadI18NJS()});c.ready("angular-i18n",function(){_.each(b.LOAD_JS_SHERPA,function(d){c.loadCoreJS(d)})});c.ready(_.last(b.LOAD_JS_SHERPA),function(){c.projectInfoInit();c.loadJS(b.PROTO_JS,"prototype_app");c.loadCSS(b.PROTO_CSS);c.ready("prototype_app",function(){c.session.storeCleanUp();if(b.ENABLE_CONSOLE_MESSAGES){a.log("Compiling page with Angular")}angular.bootstrap(document,["sherpaApp"]);c.counter("Sherpa INIT");c.counter("report")})})})};