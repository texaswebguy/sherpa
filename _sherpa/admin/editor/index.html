
<script type="text/javascript">
    Sherpa.load(
        {"jsoneditor-css":"editor/jsoneditor-min.css"}
    );

    Sherpa.js(
        {"jsoneditor-js":"editor/jsoneditor-min.js"},
        {"ace":"editor/lib/ace/ace.js"},
        {"mode-json":"editor/lib/ace/mode-json.js"},
        {"theme-textmate":"editor/lib/ace/theme-textmate.js"},
        {"theme-jsoneditor":"editor/lib/ace/theme-jsoneditor.js"},
        {"jsonlint":"editor/lib/jsonlint/jsonlint.js"}
    );
    Sherpa.ready("jsonlint", function(){
        Sherpa.editor = {}
        Sherpa.editor.options = {
            mode: 'tree',
            modes: ['code', 'form', 'text', 'tree', 'view'], // allowed modes
            error: function (err) {
                alert(err.toString());
            }
        };            
    });
</script>
<style type="text/css">
    body#jsoneditor {
        font: 10.5pt arial;
        color: #4d4d4d;
        line-height: 150%;
        width: 500px;
    }
    code {
        background-color: #f5f5f5;
    }
    #content-editor,
    #taxonomy-editor {
        width: 100%;
        height: 1000px;
    }
</style>

<div class="da-all">
    <div class="wrapper">
        <div class="title top-offset-small">
          <h1>Sherpa Editor</h1>
        </div>

        <div class="tabbable">
          <ul class="nav nav-tabs">
            <li class="active"><a href="#content" data-toggle="tab">Content</a></li>
            <li><a href="#config" data-toggle="tab">Configurations</a></li>
            <li><a href="#xref" data-toggle="tab">Resource Cross References</a></li>
          </ul>
          <div class="tab-content">
            <div class="tab-pane fade active in" id="content">
                <script type="text/javascript" >
                    Sherpa.ready("jsonlint", function(){
                        Sherpa.request({
                            resourceId: "assets", 
                            data: {
                                "locale": Sherpa.locale,
                                "directory" : "content",
                                "type" : "messages"
                            },
                            success: function(responseJSON){
                                var content_json = responseJSON;
                                var content_container = document.getElementById('content-editor');
                                var editor = new jsoneditor.JSONEditor(content_container, Sherpa.editor.options, content_json);  
                                console.log(content_container, Sherpa.editor.options, content_json)  
                            },
                            error: function(){
                                console.error("JSON parse error in assets/content/messages_"+SHERPA.DEFAULT_LOCALE+".json")
                            }
                        });
                    });

                </script>
                <p class="alert alert-info">
                    <button class="close" data-dismiss="alert"><i aria-hidden="true" class="icon-ui-close"></i></button>
                    You can switch editor mode using the mode box.
                </p>
                <div id="content-editor"></div>
            </div>
            <div class="tab-pane fade" id="config">
                <script type="text/javascript" >
                    Sherpa.ready("jsonlint", function(){
                        Sherpa.request({
                            resourceId: "get_json", 
                            data: {
                                "filename" : SHERPA.GLOBAL_CONFIG
                            },
                            success: function(responseJSON){
                                var content_json = responseJSON;
                                var content_container = document.getElementById('config-editor');
                                var editor = new jsoneditor.JSONEditor(content_container, Sherpa.editor.options, content_json);  
                                console.log(content_container, Sherpa.editor.options, content_json)  
                            },
                            error: function(){
                                console.error("JSON parse error in "+SHERPA.GLOBAL_CONFIG)
                            }
                        });
                    });

                </script>
                <p class="alert alert-info">
                    <button class="close" data-dismiss="alert"><i aria-hidden="true" class="icon-ui-close"></i></button>
                    You can switch editor mode using the mode box.
                </p>
                <div id="config-editor"></div>
            </div>
            <div class="tab-pane fade" id="xref">
                <script type="text/javascript" >
                    Sherpa.ready("jsonlint", function(){
                        Sherpa.request({
                            resourceId: "assets", 
                            data: {
                                "locale": Sherpa.locale,
                                "directory" : "xref",
                                "type" : "resources"
                            },
                            success: function(responseJSON){
                                var content_json = responseJSON;
                                var content_container = document.getElementById('xref-editor');
                                var editor = new jsoneditor.JSONEditor(content_container, Sherpa.editor.options, content_json);  
                                console.log(content_container, Sherpa.editor.options, content_json)  
                            },
                            error: function(){
                                console.error("JSON parse error in assets/xref/resources_"+SHERPA.DEFAULT_LOCALE+".json")
                            }
                        });
                    });
                </script>
                <p class="alert alert-info">
                    <button class="close" data-dismiss="alert"><i aria-hidden="true" class="icon-ui-close"></i></button>
                    You can switch editor mode using the mode box.
                </p>
                <div id="xref-editor"></div>
            </div>
          </div>
        </div>
    </div><!-- end wrapper -->
</div>

